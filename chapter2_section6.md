# 2.6 Реализация пользовательского интерфейса

Пользовательский интерфейс системы распознавания лиц разработан с учетом принципов удобства использования, функциональной полноты и эстетической привлекательности. Интерфейс построен на основе библиотеки tkinter, которая обеспечивает кроссплатформенную совместимость и не требует установки дополнительных зависимостей в большинстве дистрибутивов Python.

Проектирование графического интерфейса основано на принципе разделения функциональных областей через систему вкладок. Главное окно приложения содержит три основные вкладки, каждая из которых предоставляет доступ к определенной группе функций системы. Такая организация обеспечивает логическое разделение задач и упрощает навигацию для пользователей с различным уровнем технической подготовки.

Структура главного окна приложения включает заголовочную область с названием системы и основную рабочую область с контейнером вкладок. Заголовок выполняет информационную функцию и создает узнаваемый визуальный образ приложения. Размеры главного окна оптимизированы для работы на мониторах с разрешением от 1024×768 пикселей и выше.

```python
class FaceRecognitionSystem:
    def __init__(self, root):
        self.root = root
        self.root.title(APP_TITLE)
        self.root.geometry(WINDOW_SIZE)
        self.root.configure(bg=THEME_COLOR)
        
        self.create_application_header()
        self.initialize_tab_container()
        self.setup_interface_tabs()
```

Первая вкладка "Распознавание лиц" реализует основной функционал работы с видеопотоком. Интерфейс разделен на две области: левая панель содержит видеоизображение с камеры и элементы управления, правая панель отображает информацию о распознанном пользователе. Область видеоизображения имеет фиксированные размеры 480×360 пикселей, что обеспечивает стабильность макета интерфейса.

Элементы управления камерой включают кнопки запуска и остановки видеозахвата. Кнопки имеют взаимоисключающее состояние активности: при работающей камере активна только кнопка остановки, при выключенной камере доступна только кнопка запуска. Такое решение предотвращает некорректные операции и обеспечивает понятную обратную связь о состоянии системы.

```python
def start_camera(self):
    if self.camera_manager.start_camera():
        self.start_button.config(state="disabled")
        self.stop_button.config(state="normal")
        self.process_video_frame()
    else:
        messagebox.showerror("Ошибка", "Не удалось подключиться к камере!")
```

Информационная панель распознанного пользователя содержит статус распознавания, текстовые поля с идентификатором и именем пользователя, а также область отображения фотографии. Статус распознавания использует цветовое кодирование и символьные индикаторы для быстрого визуального восприятия результата. Фотография пользователя масштабируется до стандартного размера 170×170 пикселей с сохранением пропорций.

Вторая вкладка "Управление пользователями" предоставляет полнофункциональный интерфейс для администрирования базы пользователей. Интерфейс организован по принципу двухпанельного размещения: левая панель содержит форму добавления нового пользователя, правая панель отображает список существующих пользователей и элементы управления ими.

Форма добавления пользователя включает текстовые поля для ввода идентификатора и имени пользователя, секцию загрузки фотографии с предварительным просмотром и кнопку выполнения операции. Предварительный просмотр фотографии реализован в виде миниатюры размером 110×110 пикселей, что позволяет пользователю убедиться в корректности выбранного изображения перед добавлением в систему.

```python
def handle_photo_selection(self):
    file_path = filedialog.askopenfilename(
        title="Выберите фотографию пользователя",
        filetypes=[("Изображения", "*.jpg *.jpeg *.png *.bmp")]
    )
    
    if file_path:
        self.selected_photo_file_path = file_path
        pil_image = Image.open(file_path)
        pil_image = pil_image.resize(PHOTO_PREVIEW_SIZE, Image.Resampling.LANCZOS)
        photo_preview = ImageTk.PhotoImage(pil_image)
        self.photo_preview.config(image=photo_preview, text="")
```

Список пользователей представлен в виде таблицы с колонками для идентификатора, имени и состояния фотографии. Таблица поддерживает прокрутку для работы с большим количеством записей и позволяет выбирать отдельные строки для выполнения операций редактирования или удаления. Элементы управления включают кнопки обновления фотографии, удаления пользователя и обновления списка.

Третья вкладка "Журнал безопасности" реализует интерфейс мониторинга системы аудита. Интерфейс разделен на верхнюю область со статистическими показателями и нижнюю область с детальным журналом событий. Статистическая панель отображает ключевые показатели эффективности системы в режиме реального времени.

Статистические карточки содержат общее количество попыток распознавания за текущий день, количество успешных операций, процент эффективности системы и время последней активности. Информация автоматически обновляется каждые пять секунд через механизм планировщика событий tkinter.

```python
def schedule_automatic_refresh(self):
    self.reload_audit_data()
    self.frame.after(AUDIT_DATA_REFRESH_INTERVAL, self.schedule_automatic_refresh)

def refresh_security_metrics(self, stats):
    total_attempts = 0
    successful = 0
    
    for stat in stats['general_stats']:
        event_type, result, count, avg_distance = stat
        if event_type == 'recognition_attempt':
            total_attempts += count
            if result == 'success':
                successful += count
    
    success_rate = (successful / total_attempts * 100) if total_attempts > 0 else 0
    self.success_rate_label.config(text=f"{success_rate:.1f}%")
```

Журнал событий представлен в виде таблицы с колонками для времени, типа события, идентификатора пользователя, результата операции и степени схожести. Таблица поддерживает автоматическое обновление содержимого и цветовое кодирование строк в зависимости от типа и результата события. Успешные операции распознавания отображаются с зеленым фоном, неудачные попытки — с красным фоном, системные события — с нейтральным серым фоном.

Функция экспорта отчетов интегрирована в интерфейс журнала безопасности через специальную кнопку в заголовке таблицы. При активации функции пользователю предлагается выбрать местоположение для сохранения файла отчета в формате CSV. Экспортируемые данные включают локализованные описания событий и отформатированные временные метки для удобства анализа.

Цветовая схема интерфейса основана на профессиональной палитре с преобладанием нейтральных тонов и акцентными цветами для важных элементов. Основной фон использует светло-серый цвет, панели и карточки имеют белый фон, заголовки выделены более темным оттенком. Кнопки управления используют спокойные зеленые тона для основных действий и красные тона для операций удаления.

Адаптивность интерфейса обеспечивается через использование менеджеров размещения tkinter, которые автоматически подстраивают размеры элементов при изменении размеров окна. Минимальные размеры элементов зафиксированы для предотвращения некорректного отображения при чрезмерном уменьшении окна.

Обработка событий пользовательского интерфейса организована через систему обратных вызовов, что обеспечивает отзывчивость интерфейса и корректную обработку пользовательских действий. Длительные операции, такие как добавление пользователей или экспорт отчетов, сопровождаются информативными сообщениями о ходе выполнения и результатах операций.